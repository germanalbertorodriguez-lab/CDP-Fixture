<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="theme-color" content="#0f1923">
<meta name="description" content="Club de Profesionales CDP - Fixture y estad√≠sticas">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<title>CDP ‚Äî Club de Profesionales</title>
<link rel="manifest" href="manifest.json">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Barlow:wght@300;400;500;600;700&family=Barlow+Condensed:wght@400;600;700&display=swap" rel="stylesheet">
<style>
  :root {
    --green: #16a34a;
    --green-light: #22c55e;
    --green-xlight: #dcfce7;
    --green-glow: rgba(22, 163, 74, 0.1);
    --bg: #f0f4f8;
    --bg2: #ffffff;
    --bg3: #f8fafc;
    --bg4: #e2e8f0;
    --text: #0f172a;
    --text-dim: #475569;
    --text-dimmer: #94a3b8;
    --border: rgba(22, 163, 74, 0.2);
    --border2: #e2e8f0;
    --red: #dc2626;
    --yellow: #d97706;
    --gold: #b45309;
    --shadow: 0 1px 3px rgba(0,0,0,0.08), 0 4px 16px rgba(0,0,0,0.06);
    --shadow-sm: 0 1px 2px rgba(0,0,0,0.06);
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }
  html { scroll-behavior: smooth; }

  body {
    font-family: 'Barlow', sans-serif;
    background: var(--bg);
    color: var(--text);
    min-height: 100vh;
    overflow-x: hidden;
  }

  /* HEADER */
  .header {
    position: sticky;
    top: 0;
    z-index: 100;
    background: rgba(255,255,255,0.95);
    backdrop-filter: blur(20px);
    border-bottom: 1px solid var(--border2);
    box-shadow: var(--shadow-sm);
    padding: 0 16px;
  }

  .header-inner {
    max-width: 900px;
    margin: 0 auto;
    display: flex;
    align-items: center;
    gap: 12px;
    height: 60px;
  }

  .logo-mark {
    width: 44px;
    height: 44px;
    background: white;
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    box-shadow: 0 2px 8px rgba(0,0,0,0.12);
    overflow: hidden;
    padding: 2px;
    border: 1px solid #e2e8f0;
  }

  .header-title {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 22px;
    letter-spacing: 2px;
    color: var(--text);
  }

  .header-subtitle {
    font-size: 11px;
    color: var(--text-dimmer);
    letter-spacing: 1px;
    text-transform: uppercase;
    line-height: 1;
    margin-top: 2px;
  }

  .header-info { flex: 1; }

  .status-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: var(--green);
    box-shadow: 0 0 8px rgba(22,163,74,0.5);
    animation: pulse 2s infinite;
    margin-left: auto;
  }

  @keyframes pulse {
    0%, 100% { opacity: 1; transform: scale(1); }
    50% { opacity: 0.5; transform: scale(0.85); }
  }

  /* NAV */
  .nav {
    background: white;
    border-bottom: 1px solid var(--border2);
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none;
  }
  .nav::-webkit-scrollbar { display: none; }

  .nav-inner {
    max-width: 900px;
    margin: 0 auto;
    display: flex;
    padding: 0 8px;
  }

  .nav-btn {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 13px;
    font-weight: 700;
    letter-spacing: 1px;
    text-transform: uppercase;
    color: var(--text-dim);
    background: none;
    border: none;
    border-bottom: 3px solid transparent;
    padding: 14px 16px 11px;
    cursor: pointer;
    transition: all 0.2s;
    white-space: nowrap;
    display: flex;
    align-items: center;
    gap: 6px;
  }

  .nav-btn:hover { color: var(--text); }

  .nav-btn.active {
    color: var(--green);
    border-bottom-color: var(--green);
  }

  .nav-btn .nav-icon { font-size: 15px; }

  /* MAIN */
  .main {
    max-width: 900px;
    margin: 0 auto;
    padding: 20px 16px 40px;
  }

  /* SECTIONS */
  .section { display: none; }
  .section.active { display: block; }

  /* CARDS */
  .card {
    background: var(--bg2);
    border: 1px solid var(--border2);
    border-radius: 16px;
    overflow: hidden;
    margin-bottom: 14px;
    box-shadow: var(--shadow);
  }

  .card-header {
    padding: 14px 18px;
    background: var(--bg3);
    border-bottom: 1px solid var(--border2);
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .card-title {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 17px;
    letter-spacing: 1.5px;
    color: var(--green);
  }

  .badge {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 10px;
    font-weight: 700;
    letter-spacing: 1px;
    text-transform: uppercase;
    padding: 3px 8px;
    border-radius: 100px;
    background: var(--green-xlight);
    color: var(--green);
    border: 1px solid rgba(22,163,74,0.2);
  }

  .badge.red { background: #fee2e2; color: var(--red); border-color: rgba(220,38,38,0.2); }
  .badge.yellow { background: #fef3c7; color: var(--yellow); border-color: rgba(217,119,6,0.2); }
  .badge.gray { background: var(--bg4); color: var(--text-dim); border-color: var(--border2); }

  /* SECTION HEADER */
  .section-header {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    flex-wrap: wrap;
    gap: 12px;
    margin-bottom: 18px;
  }

  .section-title {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 32px;
    letter-spacing: 3px;
    color: var(--text);
  }

  /* FIXTURE */
  .fecha-group { margin-bottom: 24px; }

  .fecha-label {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 13px;
    letter-spacing: 2px;
    color: var(--green);
    padding: 5px 12px;
    background: var(--green-xlight);
    border: 1px solid rgba(22,163,74,0.2);
    border-radius: 100px;
    display: inline-flex;
    align-items: center;
    gap: 6px;
    margin-bottom: 10px;
  }

  .partido-row {
    background: var(--bg2);
    border: 1px solid var(--border2);
    border-radius: 14px;
    padding: 14px 18px;
    margin-bottom: 8px;
    display: grid;
    grid-template-columns: 1fr auto 1fr;
    align-items: center;
    gap: 10px;
    box-shadow: var(--shadow-sm);
    transition: all 0.2s;
  }

  .partido-row:hover {
    transform: translateY(-1px);
    box-shadow: var(--shadow);
    border-color: #cbd5e1;
  }

  .partido-row.jugado { border-left: 4px solid var(--green); }
  .partido-row.pendiente { border-left: 4px solid var(--border2); }
  .partido-row.senior { border-left: 4px solid var(--gold); }

  .equipo-name {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 16px;
    font-weight: 700;
    letter-spacing: 0.3px;
    color: var(--text);
    line-height: 1.2;
  }

  .equipo-name.right { text-align: right; }

  .resultado-box {
    text-align: center;
    min-width: 80px;
  }

  .score {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 26px;
    letter-spacing: 3px;
    color: var(--text);
    background: var(--bg3);
    padding: 4px 12px;
    border-radius: 8px;
    display: inline-block;
  }

  .score.pendiente {
    color: var(--text-dimmer);
    font-size: 15px;
    background: var(--bg4);
    font-family: 'Barlow', sans-serif;
    font-weight: 500;
    letter-spacing: 1px;
  }

  .partido-meta {
    font-size: 11px;
    color: var(--text-dimmer);
    letter-spacing: 0.3px;
    margin-top: 4px;
    font-weight: 500;
  }

  /* FILTER TABS */
  .filter-tabs {
    display: flex;
    gap: 6px;
    flex-wrap: wrap;
  }

  .filter-tab {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 12px;
    font-weight: 700;
    letter-spacing: 0.5px;
    text-transform: uppercase;
    padding: 7px 14px;
    border-radius: 100px;
    border: 1.5px solid var(--border2);
    background: var(--bg2);
    color: var(--text-dim);
    cursor: pointer;
    transition: all 0.2s;
    box-shadow: var(--shadow-sm);
  }

  .filter-tab:hover { border-color: var(--green); color: var(--green); }
  .filter-tab.active {
    background: var(--green);
    border-color: var(--green);
    color: white;
    box-shadow: 0 4px 12px rgba(22,163,74,0.25);
  }

  /* TABLA POSICIONES */
  .standings-table {
    width: 100%;
    border-collapse: collapse;
  }

  .standings-table th {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 11px;
    font-weight: 700;
    letter-spacing: 1.5px;
    text-transform: uppercase;
    color: var(--text-dimmer);
    padding: 10px 12px;
    text-align: center;
    background: var(--bg3);
    border-bottom: 2px solid var(--border2);
  }

  .standings-table th:nth-child(2) { text-align: left; }
  .standings-table th:first-child { width: 36px; }

  .standings-table td {
    padding: 11px 12px;
    text-align: center;
    font-size: 14px;
    border-bottom: 1px solid var(--bg3);
    color: var(--text-dim);
  }

  .standings-table td:nth-child(2) { text-align: left; }
  .standings-table tr:last-child td { border-bottom: none; }
  .standings-table tr:hover td { background: #f8fafc; }

  .pos-num {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 18px;
    color: var(--text-dimmer);
    width: 28px;
    height: 28px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    border-radius: 8px;
  }

  .pos-num.top {
    background: var(--green-xlight);
    color: var(--green);
  }

  .pos-num.bottom {
    background: #fee2e2;
    color: var(--red);
  }

  .team-cell {
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .team-shield {
    width: 28px;
    height: 28px;
    border-radius: 6px;
    background: var(--bg4);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 9px;
    font-weight: 800;
    color: var(--text-dim);
    flex-shrink: 0;
    overflow: hidden;
  }

  .team-shield img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 6px;
  }

  .team-name-cell {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 15px;
    font-weight: 700;
    color: var(--text);
    letter-spacing: 0.2px;
  }

  .pts {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 20px;
    color: var(--text);
  }

  .stat-cell { color: var(--text-dim); font-size: 13px; }

  .diff-pos { color: var(--green); font-weight: 600; }
  .diff-neg { color: var(--red); font-weight: 600; }

  /* GOLEADORES */
  .scorer-row {
    display: flex;
    align-items: center;
    padding: 12px 18px;
    border-bottom: 1px solid var(--bg3);
    gap: 14px;
    transition: background 0.15s;
  }

  .scorer-row:hover { background: var(--bg3); }
  .scorer-row:last-child { border-bottom: none; }

  .scorer-rank {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 22px;
    color: var(--text-dimmer);
    width: 30px;
    text-align: center;
    flex-shrink: 0;
  }

  .scorer-rank.gold { color: #d97706; }
  .scorer-rank.silver { color: #64748b; }
  .scorer-rank.bronze { color: #92400e; }

  .scorer-info { flex: 1; min-width: 0; }

  .scorer-name {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 16px;
    font-weight: 700;
    color: var(--text);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .scorer-team {
    font-size: 12px;
    color: var(--text-dimmer);
    margin-top: 1px;
    font-weight: 500;
  }

  .scorer-goals {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 32px;
    color: var(--green);
    line-height: 1;
  }

  .goals-label {
    font-size: 10px;
    color: var(--text-dimmer);
    text-align: right;
    letter-spacing: 1px;
    text-transform: uppercase;
    font-weight: 600;
  }

  /* DISCIPLINA */
  .disc-row {
    display: flex;
    align-items: center;
    padding: 12px 18px;
    border-bottom: 1px solid var(--bg3);
    gap: 12px;
    transition: background 0.15s;
  }

  .disc-row:hover { background: var(--bg3); }
  .disc-row:last-child { border-bottom: none; }

  .disc-info { flex: 1; min-width: 0; }

  .disc-name {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 15px;
    font-weight: 700;
    color: var(--text);
  }

  .disc-team {
    font-size: 11px;
    color: var(--text-dimmer);
    margin-top: 2px;
    font-weight: 500;
  }

  .disc-cards {
    display: flex;
    gap: 3px;
    flex-shrink: 0;
  }

  .card-icon {
    width: 16px;
    height: 22px;
    border-radius: 3px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-size: 9px;
    font-weight: 800;
    box-shadow: 0 2px 4px rgba(0,0,0,0.15);
  }

  .card-icon.yellow-card { background: #fbbf24; color: #000; }
  .card-icon.red-card { background: var(--red); color: #fff; }

  .suspension-info {
    text-align: right;
    flex-shrink: 0;
  }

  .suspension-num {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 22px;
    color: var(--red);
    line-height: 1;
  }

  .suspension-label {
    font-size: 10px;
    color: var(--text-dimmer);
    letter-spacing: 0.5px;
    font-weight: 600;
  }

  .habilitado-fecha {
    font-size: 11px;
    color: var(--green);
    margin-top: 2px;
    font-weight: 600;
  }

  /* SPONSORS */
  .sponsor-card {
    background: var(--bg2);
    border: 1px solid var(--border2);
    border-radius: 16px;
    padding: 22px;
    margin-bottom: 12px;
    box-shadow: var(--shadow);
    transition: all 0.2s;
  }

  .sponsor-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 24px rgba(0,0,0,0.1);
  }

  .sponsor-name {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 22px;
    letter-spacing: 2px;
    color: var(--text);
    margin-bottom: 10px;
  }

  .sponsor-desc {
    font-size: 14px;
    color: var(--text-dim);
    line-height: 1.7;
    margin-bottom: 14px;
  }

  .sponsor-contact {
    display: flex;
    gap: 16px;
    font-size: 13px;
    color: var(--text-dimmer);
    font-weight: 500;
  }

  .sponsor-contact span {
    display: flex;
    align-items: center;
    gap: 5px;
  }

  /* LOADING */
  .loading {
    text-align: center;
    padding: 60px 20px;
  }

  .loading-spinner {
    width: 36px;
    height: 36px;
    border: 3px solid var(--bg4);
    border-top-color: var(--green);
    border-radius: 50%;
    animation: spin 0.7s linear infinite;
    margin: 0 auto 14px;
  }

  @keyframes spin { to { transform: rotate(360deg); } }

  .loading-text {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 13px;
    letter-spacing: 2px;
    text-transform: uppercase;
    color: var(--text-dimmer);
  }

  /* ERROR */
  .error-box {
    background: #fff5f5;
    border: 1px solid #fecaca;
    border-radius: 14px;
    padding: 24px;
    text-align: center;
  }

  .error-icon { font-size: 32px; margin-bottom: 10px; }
  .error-title { font-family: 'Bebas Neue', sans-serif; font-size: 20px; color: var(--red); margin-bottom: 8px; letter-spacing: 1px; }
  .error-msg { font-size: 14px; color: var(--text-dim); margin-bottom: 18px; line-height: 1.6; }
  .retry-btn {
    background: var(--green);
    color: white;
    border: none;
    padding: 10px 22px;
    border-radius: 8px;
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 13px;
    font-weight: 700;
    letter-spacing: 1px;
    text-transform: uppercase;
    cursor: pointer;
    transition: all 0.2s;
    box-shadow: 0 4px 12px rgba(22,163,74,0.25);
  }
  .retry-btn:hover { opacity: 0.88; transform: translateY(-1px); }

  /* EMPTY */
  .empty {
    text-align: center;
    padding: 40px;
    color: var(--text-dimmer);
    font-size: 14px;
    font-weight: 500;
  }

  /* CONFIG BANNER */
  .config-banner {
    background: #fffbeb;
    border: 1px solid #fde68a;
    border-radius: 12px;
    padding: 14px 16px;
    margin-bottom: 16px;
    font-size: 13px;
    color: #92400e;
    line-height: 1.5;
  }

  /* SEARCH */
  .search-wrap {
    position: relative;
    margin-bottom: 16px;
  }

  .search-wrap input {
    width: 100%;
    background: var(--bg2);
    border: 1.5px solid var(--border2);
    border-radius: 10px;
    padding: 11px 14px 11px 40px;
    color: var(--text);
    font-family: 'Barlow', sans-serif;
    font-size: 14px;
    outline: none;
    transition: border-color 0.2s;
    box-shadow: var(--shadow-sm);
  }

  .search-wrap input:focus { border-color: var(--green); }
  .search-wrap input::placeholder { color: var(--text-dimmer); }

  .search-icon {
    position: absolute;
    left: 13px;
    top: 50%;
    transform: translateY(-50%);
    color: var(--text-dimmer);
    font-size: 15px;
    pointer-events: none;
  }

  /* SCROLL top */
  .scroll-top {
    position: fixed;
    bottom: 20px;
    right: 20px;
    width: 42px;
    height: 42px;
    background: var(--green);
    color: white;
    border: none;
    border-radius: 50%;
    font-size: 18px;
    cursor: pointer;
    opacity: 0;
    transition: opacity 0.3s;
    z-index: 50;
    box-shadow: 0 4px 16px rgba(22,163,74,0.35);
  }

  .scroll-top.visible { opacity: 1; }

  /* MOBILE */
  @media (max-width: 480px) {
    .main { padding: 12px; }
    .standings-table th,
    .standings-table td { padding: 8px 6px; font-size: 12px; }
    .score { font-size: 20px; }
    .equipo-name { font-size: 14px; }
    .section-title { font-size: 26px; }
    .team-name-cell { font-size: 13px; }
  }

  /* ZONE DIVIDER */
  .zone-divider {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 12px;
    letter-spacing: 2px;
    color: var(--text-dimmer);
    text-transform: uppercase;
    padding: 16px 0 8px;
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .zone-divider::after {
    content: '';
    flex: 1;
    height: 1px;
    background: var(--border2);
  }

  /* TABS */
  .tab-row {
    display: flex;
    gap: 6px;
    overflow-x: auto;
    scrollbar-width: none;
    padding-bottom: 2px;
    margin-bottom: 16px;
  }
  .tab-row::-webkit-scrollbar { display: none; }

  .tab-pill {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 12px;
    font-weight: 700;
    letter-spacing: 0.5px;
    padding: 6px 14px;
    border-radius: 100px;
    border: 1.5px solid var(--border2);
    background: var(--bg2);
    color: var(--text-dim);
    cursor: pointer;
    white-space: nowrap;
    transition: all 0.18s;
    box-shadow: var(--shadow-sm);
  }

  .tab-pill:hover { border-color: var(--green); color: var(--green); }
  .tab-pill.active {
    background: var(--green);
    color: white;
    border-color: var(--green);
    box-shadow: 0 4px 12px rgba(22,163,74,0.25);
  }
</style>
</head>
<body>

<header class="header">
  <div class="header-inner">
    <div class="logo-mark">
      <img src="data:image/jpeg;base64,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093FXp282n+DD5B6XqaS3UhlbVEEieEnlIMkcPec+C+m0s1uo+1FNKbjNd3324Xg0l1oqyRrn91gvoq6mlaSGw/7J7S1vhjlnDbmk0htNJarT6foDS5p5mtZSNbYmTQxmV4w1rhFhnJ7/PjknK92xWnQ0WsK+6Wiw2un1BI1zaquit4immHIB/2XiO8HJoDsE9QM9UEpREQEREBERAREQEREBERAREQCMjCikWmbm+3XOOvu0VRWVdLDSsn7ggYi5cXvHLq5xeScYHsUrRBFKzS9bUWX0R1ZSGpNbNV973L2926Tngxlrw9jml/RwdkgEdOXTt1mnZKv06KevL4q60i3TuLPshI5/ZAc4ye8dkY8QOqkCIPJ0/bauidW1FfUQT1VZK2R5hiLGNDY2sAAJJ/Bz19uPJdRlhrZb1NV3C5NqKcQVMEDGxcZGsnexxDnZwePdgNwB08clSFEEUg0tV/JdVBVVdFU1E0FNTgupT3RjgJLct5Z5Eud1B9XII6tyflW6PnqqO3Rz18VTNSxTwPfVRGYFkr2OOOTiSWhga0vLsj+VlTBEHnait0lztvo8MrYpmTw1ETnt5N5xStkaCMjoS0A+4qPVmjaips0NJLWUctQ2orJXulpS6Iipke9wDOX4JeMZJB4nPj0mSIPPv1sF00/WWkTGAVNO+ASBoPDLcZx549i8z5AramG5PuFbTmqrjCCYIS1jGxHIGC4kkku658wPLJkaIIrquxV9TcPlC3yMd3z6BlRC5mXFlPV97yaS4AdHyZyDnAx1XYg0/VR6ofdDWwmlNU6qbCIjz5OgZCQXcsYHDPh548usiRBHKbT9bTixxNrqeSC1w8O7kgPrvwG94CHdCGcwM5Hrk9emFj0/W0Oo6m61NwZVCZsrBljufF0vNgJLiAGj1AAAOgPmVI0QEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREBERAREQEREH/2Q==" alt="CDP" style="width:100%;height:100%;object-fit:contain;border-radius:8px;"/>
    </div>
    <div class="header-info">
      <div class="header-title">Club de Profesionales</div>
      <div class="header-subtitle">Justo Jos√© de Urquiza</div>
    </div>
    <div class="status-dot" id="statusDot" title="Conectado al Sheet"></div>
  </div>
</header>

<nav class="nav">
  <div class="nav-inner">
    <button class="nav-btn active" onclick="showSection('fixture')" id="nav-fixture">
      <span class="nav-icon">üìÖ</span> Fixture
    </button>
    <button class="nav-btn" onclick="showSection('posiciones')" id="nav-posiciones">
      <span class="nav-icon">üèÜ</span> Posiciones
    </button>
    <button class="nav-btn" onclick="showSection('goleadores')" id="nav-goleadores">
      <span class="nav-icon">‚öΩ</span> Goleadores
    </button>
    <button class="nav-btn" onclick="showSection('disciplina')" id="nav-disciplina">
      <span class="nav-icon">üü®</span> Disciplina
    </button>
    <button class="nav-btn" onclick="showSection('sponsors')" id="nav-sponsors">
      <span class="nav-icon">‚≠ê</span> Sponsors
    </button>
  </div>
</nav>

<main class="main">

  <!-- ===================== FIXTURE ===================== -->
  <section class="section active" id="section-fixture">
    <div class="section-header">
      <div class="section-title">Fixture</div>
      <div class="filter-tabs" id="fixtureFilters">
        <button class="filter-tab active" onclick="filterFixture('todos', this)">Todos</button>
        <button class="filter-tab" onclick="filterFixture('libres', this)">Libres</button>
        <button class="filter-tab" onclick="filterFixture('senior', this)">S√©nior</button>
        <button class="filter-tab" onclick="filterFixture('pendiente', this)">Pendientes</button>
      </div>
    </div>
    <div id="fixtureContainer">
      <div class="loading"><div class="loading-spinner"></div><div class="loading-text">Cargando fixture...</div></div>
    </div>
  </section>

  <!-- ===================== POSICIONES ===================== -->
  <section class="section" id="section-posiciones">
    <div class="section-header">
      <div class="section-title">Posiciones</div>
    </div>
    <div class="tab-row" id="posTab">
      <button class="tab-pill active" onclick="showPos('general-libres', this)">Gral. Libres</button>
      <button class="tab-pill" onclick="showPos('zona-a-libres', this)">Zona A</button>
      <button class="tab-pill" onclick="showPos('zona-b-libres', this)">Zona B</button>
      <button class="tab-pill" onclick="showPos('general-senior', this)">S√©nior</button>
    </div>
    <div id="posContainer">
      <div class="loading"><div class="loading-spinner"></div><div class="loading-text">Cargando posiciones...</div></div>
    </div>
  </section>

  <!-- ===================== GOLEADORES ===================== -->
  <section class="section" id="section-goleadores">
    <div class="section-header">
      <div class="section-title">Goleadores</div>
    </div>
    <div class="tab-row">
      <button class="tab-pill active" onclick="showScorers('libres-a', this)">Libres A</button>
      <button class="tab-pill" onclick="showScorers('libres-b', this)">Libres B</button>
      <button class="tab-pill" onclick="showScorers('senior', this)">S√©nior</button>
    </div>
    <div id="scorersContainer">
      <div class="loading"><div class="loading-spinner"></div><div class="loading-text">Cargando goleadores...</div></div>
    </div>
  </section>

  <!-- ===================== DISCIPLINA ===================== -->
  <section class="section" id="section-disciplina">
    <div class="section-header">
      <div class="section-title">Disciplina</div>
    </div>
    <div class="tab-row">
      <button class="tab-pill active" onclick="showDisc('rojas', this)">üü• Rojas</button>
      <button class="tab-pill" onclick="showDisc('amarillas-a', this)">üü® Libres A</button>
      <button class="tab-pill" onclick="showDisc('amarillas-b', this)">üü® Libres B</button>
      <button class="tab-pill" onclick="showDisc('amarillas-senior', this)">üü® S√©nior</button>
    </div>
    <div id="discContainer">
      <div class="loading"><div class="loading-spinner"></div><div class="loading-text">Cargando disciplina...</div></div>
    </div>
  </section>

  <!-- ===================== SPONSORS ===================== -->
  <section class="section" id="section-sponsors">
    <div class="section-header">
      <div class="section-title">Sponsors</div>
    </div>
    <div id="sponsorsContainer">
      <div class="loading"><div class="loading-spinner"></div><div class="loading-text">Cargando sponsors...</div></div>
    </div>
  </section>

</main>

<button class="scroll-top" id="scrollTopBtn" onclick="window.scrollTo({top:0,behavior:'smooth'})">‚Üë</button>

<script>
// ============================================================
// CONFIGURACI√ìN ‚Äî REEMPLAZ√Å CON TU SHEET ID
// ============================================================
const SHEET_ID = '1pmv5pDVTfa8gCYQPz1ZbqgyyM7zNtd7vELtN9vuYEY0';
const PUBLISHED_ID = '2PACX-1vSUVv4GkwAreYqXyaD6LOpVLpjQTHw1vy4z_6N3xj2wjphMUcJTPy-MJQXlX-ySD6-QCB8-PWsktFKV';
// Ejemplo: '1pmv5pDVTfa8gCYQPz1ZbqgyyM7zNtd7vELtN9vuYEY0'

const API_BASE = `https://docs.google.com/spreadsheets/d/${SHEET_ID}/gviz/tq?tqx=out:json&sheet=`;
const API_BASE_PUB = `https://docs.google.com/spreadsheets/d/e/${PUBLISHED_ID}/pub?output=csv&gid=`;

// ============================================================
// ESTADO
// ============================================================
let state = {
  fixture: null,
  posiciones: {},
  goleadores: {},
  disciplina: {},
  sponsors: null,
  currentFixtureFilter: 'todos',
  currentPos: 'general-libres',
  currentScorers: 'libres-a',
  currentDisc: 'rojas'
};

// ============================================================
// HELPERS ‚Äî Google Visualization API JSON parser
// ============================================================
async function fetchSheet(sheetName) {
  const url = `https://docs.google.com/spreadsheets/d/${SHEET_ID}/gviz/tq?tqx=out:json&sheet=${encodeURIComponent(sheetName)}`;
  const res = await fetch(url);
  if (!res.ok) throw new Error('HTTP ' + res.status);
  const text = await res.text();
  if (!text.includes('google.visualization')) throw new Error('Respuesta invalida');
  const json = JSON.parse(text.slice(text.indexOf('{'), text.lastIndexOf('}') + 1));
  if (!json.table) throw new Error('Sin datos');
  return parseGvizTable(json.table);
}

function parseGvizTable(table) {
  if (!table || !table.rows) return [];
  const cols = table.cols.map(c => c.label || '');
  return table.rows.map(row => {
    const obj = {};
    row.c.forEach((cell, i) => {
      obj[cols[i]] = cell ? cell.v : null;
    });
    return obj;
  });
}

function gvizCellValue(cell) {
  return cell ? cell.v : null;
}

// Fetch raw ‚Äî returns rows as arrays
async function fetchSheetRaw(sheetName) {
  const url = `https://docs.google.com/spreadsheets/d/${SHEET_ID}/gviz/tq?tqx=out:json&sheet=${encodeURIComponent(sheetName)}`;
  const res = await fetch(url);
  if (!res.ok) throw new Error('HTTP ' + res.status);
  const text = await res.text();
  if (!text.includes('google.visualization')) throw new Error('Respuesta invalida');
  const json = JSON.parse(text.slice(text.indexOf('{'), text.lastIndexOf('}') + 1));
  const table = json.table;
  if (!table || !table.rows) return { cols: [], rows: [] };
  const cols = table.cols.map(c => c.label || '');
  const rows = table.rows.map(row => row.c ? row.c.map(c => c ? c.v : null) : []);
  return { cols, rows };
}

// ============================================================
// NAVIGATION
// ============================================================
function showSection(id) {
  document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
  document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
  document.getElementById('section-' + id).classList.add('active');
  document.getElementById('nav-' + id).classList.add('active');

  // Lazy load
  if (id === 'fixture' && !state.fixture) loadFixture();
  if (id === 'posiciones' && !state.posiciones['general-libres']) loadPosiciones();
  if (id === 'goleadores' && !state.goleadores['libres-a']) loadGoleadores();
  if (id === 'disciplina' && !state.disciplina['rojas']) loadDisciplina();
  if (id === 'sponsors' && !state.sponsors) loadSponsors();
}

// ============================================================
// FIXTURE
// ============================================================
async function loadFixture() {
  try {
    const { cols, rows } = await fetchSheetRaw('Fixture');
    // cols: Fecha, Cancha, Partido, Resultado, Cancha y Hora, Jugado, Color, ...
    state.fixture = rows.filter(r => r[2] && String(r[2]).trim() !== '').map(r => ({
      fecha: r[0],
      cancha: r[1],
      partido: r[2],
      resultado: r[3],
      canchaHora: r[4],
      jugado: r[5],
      isSenior: r[2] ? String(r[2]).includes('(S)') : false,
      fechaDate: r[13]
    }));
    renderFixture();
  } catch(e) {
    showError('fixtureContainer', 'No se pudo cargar el fixture', loadFixture);
  }
}

function filterFixture(filter, btn) {
  document.querySelectorAll('#fixtureFilters .filter-tab').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
  state.currentFixtureFilter = filter;
  renderFixture();
}

function renderFixture() {
  const container = document.getElementById('fixtureContainer');
  let items = state.fixture || [];

  if (state.currentFixtureFilter === 'libres') items = items.filter(p => !p.isSenior);
  if (state.currentFixtureFilter === 'senior') items = items.filter(p => p.isSenior);
  if (state.currentFixtureFilter === 'pendiente') items = items.filter(p => p.jugado !== 'Jugado' && p.jugado !== 'NR');

  if (!items.length) {
    container.innerHTML = '<div class="empty">No hay partidos en esta vista</div>';
    return;
  }

  // Group by Fecha (round)
  const groups = {};
  items.forEach(p => {
    const key = p.fecha ? 'Fecha ' + p.fecha : 'Sin fecha';
    if (!groups[key]) groups[key] = [];
    groups[key].push(p);
  });

  let html = '';
  Object.entries(groups).forEach(([fecha, partidos]) => {
    html += `<div class="fecha-group">
      <div class="fecha-label">${fecha}</div>`;
    partidos.forEach(p => {
      const jugado = p.jugado === 'Jugado';
      const nrCase = p.jugado === 'NR';
      const rowClass = p.isSenior ? 'senior' : (jugado || nrCase ? 'jugado' : 'pendiente');
      let local = '', visitante = '', result = '';

      if (p.partido) {
        // Format: "F1. Equipo A vs Equipo B"
        const match = String(p.partido).match(/^[^.]+\.\s*(.+?)\s+vs\s+(.+)$/i);
        if (match) { local = match[1]; visitante = match[2]; }
        else { local = p.partido; visitante = ''; }
      }

      if (jugado && p.resultado) {
        result = `<div class="score">${p.resultado}</div>`;
      } else if (nrCase) {
        result = `<div class="score pendiente">NR</div>`;
      } else {
        result = `<div class="score pendiente">vs</div>`;
      }

      html += `<div class="partido-row ${rowClass}">
        <div class="equipo-name">${local}</div>
        <div class="resultado-box">${result}${p.canchaHora ? `<div class="partido-meta">${p.canchaHora}</div>` : ''}</div>
        <div class="equipo-name right">${visitante}</div>
      </div>`;
    });
    html += `</div>`;
  });

  container.innerHTML = html;
}

// ============================================================
// POSICIONES
// ============================================================
const POS_SHEETS = {
  'general-libres': 'Tabla de Pos LIBRES',
  'zona-a-libres': 'Pos Libres ZONA A',
  'zona-b-libres': 'Pos Libres ZONA B',
  'general-senior': 'Tabla de Pos SENIOR',
  'zona-a-senior': 'Pos Senior ZONA A',
  'zona-b-senior': 'Pos Senior ZONA B',
  'z-camp': 'Z. Campeonato A',
  'z-desc': 'Z. Descenso A',
  'z-asc': 'Z. Ascenso B',
  'z-promo': 'Z. Promo B'
};

async function loadPosiciones() {
  await loadPosView('general-libres');
}

async function showPos(view, btn) {
  document.querySelectorAll('#posTab .tab-pill').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
  state.currentPos = view;
  if (state.posiciones[view]) {
    renderPos(view);
  } else {
    document.getElementById('posContainer').innerHTML =
      '<div class="loading"><div class="loading-spinner"></div><div class="loading-text">Cargando...</div></div>';
    await loadPosView(view);
  }
}

async function loadPosView(view) {
  try {
    const sheetName = POS_SHEETS[view];
    const data = await fetchSheet(sheetName);
    state.posiciones[view] = data.filter(r => r['Equipo'] || r['Equipo '] || r['Equipos']);
    renderPos(view);
  } catch(e) {
    showError('posContainer', 'No se pudo cargar la tabla', () => loadPosView(view));
  }
}

function renderPos(view) {
  const data = state.posiciones[view];
  if (!data || !data.length) {
    document.getElementById('posContainer').innerHTML = '<div class="empty">Sin datos disponibles</div>';
    return;
  }

  const isGeneral = view.includes('general');
  const isSenior = view.includes('senior');
  const totalRows = data.length;

  let html = `<div class="card">
    <table class="standings-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Equipo</th>
          <th>PJ</th>
          <th>Pts</th>
          <th>PG</th>
          <th>PE</th>
          <th>PP</th>
          <th>GF</th>
          <th>GC</th>
          <th>Dif</th>
        </tr>
      </thead>
      <tbody>`;

  data.forEach((row, i) => {
    const pos = row['Posicion'] || row['Pos'] || row['Pos '] || (i + 1);
    const equipo = row['Equipo'] || row['Equipo '] || row['Equipos'] || '-';
    const pj = row['PJ'] ?? '-';
    const pts = row['Puntos'] ?? '-';
    const pg = row['PG'] ?? '-';
    const pe = row['PE'] ?? '-';
    const pp = row['PP'] ?? '-';
    const gf = row['GF'] ?? '-';
    const gc = row['GC'] ?? '-';
    const dif = (row['Diferencia'] || row['Dif'] || row['DIF']);

    const posClass = i === 0 ? 'top' : (i >= totalRows - 2 ? 'bottom' : '');
    const difClass = dif > 0 ? 'diff-pos' : (dif < 0 ? 'diff-neg' : '');
    const initials = equipo.split(' ').map(w => w[0]).join('').substring(0, 2).toUpperCase();

    html += `<tr>
      <td><div class="pos-num ${posClass}">${pos}</div></td>
      <td>
        <div class="team-cell">
          <div class="team-shield">${initials}</div>
          <div class="team-name-cell">${equipo}</div>
        </div>
      </td>
      <td class="stat-cell">${pj}</td>
      <td><div class="pts">${pts}</div></td>
      <td class="stat-cell">${pg}</td>
      <td class="stat-cell">${pe}</td>
      <td class="stat-cell">${pp}</td>
      <td class="stat-cell">${gf}</td>
      <td class="stat-cell">${gc}</td>
      <td class="${difClass}">${dif !== undefined && dif !== null ? (dif > 0 ? '+' + dif : dif) : '-'}</td>
    </tr>`;
  });

  html += `</tbody></table></div>`;
  document.getElementById('posContainer').innerHTML = html;
}

// ============================================================
// GOLEADORES
// ============================================================
const SCORER_SHEETS = {
  'libres-a': 'Goleadores LIBRES A',
  'libres-b': 'Goleadores LIBRES B',
  'senior': 'Goleadores SENIOR'
};

async function loadGoleadores() {
  await loadScorersView('libres-a');
}

async function showScorers(view, btn) {
  document.querySelectorAll('#section-goleadores .tab-pill').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
  state.currentScorers = view;
  if (state.goleadores[view]) {
    renderScorers(view);
  } else {
    document.getElementById('scorersContainer').innerHTML =
      '<div class="loading"><div class="loading-spinner"></div><div class="loading-text">Cargando...</div></div>';
    await loadScorersView(view);
  }
}

async function loadScorersView(view) {
  try {
    const sheetName = SCORER_SHEETS[view];
    const data = await fetchSheet(sheetName);
    const key = view === 'senior' ? 'Total' : 'Total';
    const processed = data
      .filter(r => r['Jugador'] && r[key] > 0)
      .sort((a, b) => (b[key] || 0) - (a[key] || 0))
      .slice(0, 40);
    state.goleadores[view] = processed;
    renderScorers(view);
  } catch(e) {
    showError('scorersContainer', 'No se pudo cargar goleadores', () => loadScorersView(view));
  }
}

function renderScorers(view) {
  const data = state.goleadores[view];
  if (!data || !data.length) {
    document.getElementById('scorersContainer').innerHTML = '<div class="empty">Sin datos disponibles</div>';
    return;
  }

  let html = '<div class="card">';
  data.forEach((p, i) => {
    const rank = i + 1;
    const rankClass = rank === 1 ? 'gold' : rank === 2 ? 'silver' : rank === 3 ? 'bronze' : '';
    const goals = p['Total'] || 0;
    html += `<div class="scorer-row">
      <div class="scorer-rank ${rankClass}">${rank}</div>
      <div class="scorer-info">
        <div class="scorer-name">${p['Jugador'] || '-'}</div>
        <div class="scorer-team">${p['Equipo'] || '-'}</div>
      </div>
      <div>
        <div class="scorer-goals">${goals}</div>
        <div class="goals-label">goles</div>
      </div>
    </div>`;
  });
  html += '</div>';
  document.getElementById('scorersContainer').innerHTML = html;
}

// ============================================================
// DISCIPLINA
// ============================================================
const DISC_SHEETS = {
  'rojas': 'Tarjetas ROJAS',
  'amarillas-a': 'Amarillas LIBRES A',
  'amarillas-b': 'Amarillas LIBRES B',
  'amarillas-senior': 'Amarillas SENIOR'
};

async function loadDisciplina() {
  await loadDiscView('rojas');
}

async function showDisc(view, btn) {
  document.querySelectorAll('#section-disciplina .tab-pill').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
  state.currentDisc = view;
  if (state.disciplina[view]) {
    renderDisc(view);
  } else {
    document.getElementById('discContainer').innerHTML =
      '<div class="loading"><div class="loading-spinner"></div><div class="loading-text">Cargando...</div></div>';
    await loadDiscView(view);
  }
}

async function loadDiscView(view) {
  try {
    const sheetName = DISC_SHEETS[view];
    const data = await fetchSheet(sheetName);
    state.disciplina[view] = data.filter(r => r['Jugador'] && r['Jugador'] !== '');
    renderDisc(view);
  } catch(e) {
    showError('discContainer', 'No se pudo cargar disciplina', () => loadDiscView(view));
  }
}

function renderDisc(view) {
  const data = state.disciplina[view];
  if (!data || !data.length) {
    document.getElementById('discContainer').innerHTML = '<div class="empty">Sin sanciones registradas</div>';
    return;
  }

  const isRojas = view === 'rojas';
  let html = '<div class="card">';

  if (isRojas) {
    data.forEach(r => {
      const fechaHab = r['Habilitado FECHA'];
      const partidos = r['Partidos'];
      const articulo = r['Art√≠culo'] || r['Articulo'] || '';
      html += `<div class="disc-row">
        <div class="disc-info">
          <div class="disc-name">${r['Jugador'] || '-'}</div>
          <div class="disc-team">${r['Equipo'] || '-'} ${articulo ? '¬∑ Art. ' + articulo : ''}</div>
        </div>
        <div class="suspension-info">
          <div class="suspension-num">${partidos || '-'}</div>
          <div class="suspension-label">partido${partidos > 1 ? 's' : ''}</div>
          ${fechaHab ? `<div class="habilitado-fecha">Hab. F${fechaHab}</div>` : ''}
        </div>
      </div>`;
    });
  } else {
    // Amarillas ‚Äî sort by total desc
    const sorted = [...data]
      .sort((a, b) => (b['Total'] || 0) - (a['Total'] || 0))
      .filter(r => (r['Total'] || 0) > 0);

    sorted.forEach(r => {
      const total = r['Total'] || 0;
      const cards = Array.from({length: Math.min(total, 10)}, () =>
        `<span class="card-icon yellow-card">A</span>`).join('');
      html += `<div class="disc-row">
        <div class="disc-info">
          <div class="disc-name">${r['Jugador'] || '-'}</div>
          <div class="disc-team">${r['Equipo'] || '-'}</div>
        </div>
        <div class="disc-cards">${cards}</div>
        <div style="font-family:'Bebas Neue',sans-serif;font-size:22px;color:#d97706;width:28px;text-align:right;font-weight:700">${total}</div>
      </div>`;
    });

    if (!sorted.length) html += '<div class="empty" style="padding:20px">Sin amarillas registradas</div>';
  }

  html += '</div>';
  document.getElementById('discContainer').innerHTML = html;
}

// ============================================================
// SPONSORS
// ============================================================
async function loadSponsors() {
  try {
    const data = await fetchSheet('Nuestros Sponsors');
    state.sponsors = data.filter(r => r['Sponsor']);
    renderSponsors();
  } catch(e) {
    showError('sponsorsContainer', 'No se pudo cargar sponsors', loadSponsors);
  }
}

function renderSponsors() {
  const data = state.sponsors;
  const container = document.getElementById('sponsorsContainer');
  if (!data || !data.length) {
    container.innerHTML = '<div class="empty">Sin sponsors registrados</div>';
    return;
  }

  let html = '';
  const seen = new Set();
  data.forEach(r => {
    const name = (r['Sponsor'] || '').replace('‚ûú ', '');
    if (seen.has(name)) return;
    seen.add(name);
    html += `<div class="sponsor-card">
      <div class="sponsor-name">${name}</div>
      ${r['Informacion'] ? `<div class="sponsor-desc">${r['Informacion']}</div>` : ''}
      <div class="sponsor-contact">
        ${r['Direccion'] ? `<span>üìç ${r['Direccion']}</span>` : ''}
        ${r['Telefono'] ? `<span>üì± ${r['Telefono']}</span>` : ''}
      </div>
    </div>`;
  });

  container.innerHTML = html || '<div class="empty">Sin sponsors registrados</div>';
}

// ============================================================
// ERROR HELPER
// ============================================================
function showError(containerId, msg, retryFn) {
  const isSheetNotConfigured = SHEET_ID === 'TU_SHEET_ID_AQUI';
  document.getElementById(containerId).innerHTML = `
    <div class="error-box">
      <div class="error-icon">${isSheetNotConfigured ? '‚öôÔ∏è' : '‚ö†Ô∏è'}</div>
      <div class="error-title">${isSheetNotConfigured ? 'Configuraci√≥n requerida' : 'Error de conexi√≥n'}</div>
      <div class="error-msg">
        ${isSheetNotConfigured
          ? 'Necesit√°s reemplazar <code>TU_SHEET_ID_AQUI</code> en el c√≥digo con el ID de tu Google Sheet.<br><br>El ID est√° en la URL del sheet: <code>docs.google.com/spreadsheets/d/<strong>ESTE_ES_EL_ID</strong>/edit</code>'
          : msg + '. Verific√° que el Sheet sea p√∫blico (cualquiera con el link puede ver).'
        }
      </div>
      ${!isSheetNotConfigured ? `<button class="retry-btn" onclick="(${retryFn.toString()})()">Reintentar</button>` : ''}
    </div>`;
}

// ============================================================
// SCROLL TO TOP
// ============================================================
window.addEventListener('scroll', () => {
  const btn = document.getElementById('scrollTopBtn');
  btn.classList.toggle('visible', window.scrollY > 300);
});

// ============================================================
// SERVICE WORKER
// ============================================================
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('/sw.js').catch(() => {});
  });
}

// ============================================================
// INIT
// ============================================================
window.addEventListener('DOMContentLoaded', () => {
  // Check sheet config
  if (SHEET_ID === 'TU_SHEET_ID_AQUI') {
    document.getElementById('statusDot').style.background = 'var(--yellow)';
    document.getElementById('statusDot').style.boxShadow = '0 0 8px var(--yellow)';
  }
  loadFixture();
});
</script>
</body>
</html>
